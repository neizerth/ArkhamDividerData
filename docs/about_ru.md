# Описание работы парсера

## Источники

- ArkhamDB
- Arkham Cards

Arkham Cards повторяет структуру хранения данных

## Сущности

### Cycle

Содержит основные циклы, а также категории для отдельных сценариев и фанатского контента

### Pack

Содержание циклов по дополнениям

В ArkhamDB новые циклы хранятся 1+1, старые 1+6. Для старых циклов записей 1+1 не предусмотрены

- В Arkham Cards хранятся только фанатские наборы

### EncounterSet

Наборы контактов

- В ArkhamDB хранятся карты контактов, что позволяет вычислить размер набора контактов. 
Карты последних циклы могут быть представлены частично, из-за чего количество может считаться неверно
- В Arkham Cards есть фанатские сценарии, но нет большинства карт контактов. Поэтому для фанатских кампаний пока невозможно точно считать количество карт в наборе 
- Arkham Cards хранит наборы для фанатских сценариев, а также официальные наборы, которые требуются в сценариях

### Campaign

Кампания Arkham Cards. id кампании не всегда совпадает с кодом цикла (Cycle) или набора (Pack). Используется mapping через файл

### Scenario

Названия сценариев Arkham Cards не совпадают с названиями наборов

Чтобы найти подходящий, иногда нужно искать его по id набора контактов, а уже оттуда получать информацию о наборе

Обычно все самостоятельные сценарии располагаются здесь. Но, к примеру, для Фортуны и безрассудства, Войны внешних богов и капли сценарии сгруппированы в самостоятельные кампании (Campaign)

### Icon

- Id иконки в шрифте Arkham Cards не всегда совпадает с кодом набора контактов. Используется mapping после парсинга https://github.com/zzorba/ArkhamCards/blob/master/src/icons/EncounterIcon.tsx
- Иногда иконки вообще нет
- В Arkham Cards у сценариев могут быть неверные иконки

### Story

Все сюжеты вместе: и кампании и одиночные приключения

У Arkham Cards можно найти официальные ответвления раньше чем на ArkhamDB